# Copy this file to installation/config.env and adjust values.

# -----------------------------
# Global
# -----------------------------
INSTALL_PREREQS=true
INSTALL_POSTGRES=true
# LiveKit install mode:
# - ask: prompt during install_all.sh
# - true: always install/setup LiveKit
# - false: skip LiveKit install/setup
INSTALL_LIVEKIT=ask
INSTALL_API=true
INSTALL_AGENT=true
INSTALL_ADMIN=true
INSTALL_NGINX=false

# Pull latest code during install/update steps when repo has .git
GIT_UPDATE=true
DEPLOY_BRANCH=main

# Absolute repo path on target machine
REPO_ROOT=/opt/coziyoo
INGRESS_MODE=npm

# -----------------------------
# Paths (relative to REPO_ROOT unless absolute)
# -----------------------------
API_DIR=.
AGENT_DIR=agent-python
ADMIN_DIR=admin-panel
ADMIN_PUBLISH_DIR=/var/www/coziyoo-admin

# -----------------------------
# API (Node.js + Express)
# -----------------------------
API_SERVICE_NAME=coziyoo-api
API_RUN_USER=www-data
API_RUN_GROUP=www-data
API_ENV_FILE=/opt/coziyoo/.env
API_PORT=3000
API_START_CMD="node dist/src/server.js"

# -----------------------------
# Agent (Python)
# -----------------------------
AGENT_SERVICE_NAME=coziyoo-agent
AGENT_RUN_USER=www-data
AGENT_RUN_GROUP=www-data
AGENT_ENV_FILE=/opt/coziyoo/agent-python/.env.local
AGENT_START_CMD="python src/agent_http_runner.py"
AGENT_HTTP_HOST=127.0.0.1
AGENT_HTTP_PORT=8787
AGENT_HEALTH_PATH=/health

# -----------------------------
# LiveKit (first-install only)
# -----------------------------
LIVEKIT_SERVICE_NAME=livekit
LIVEKIT_VERSION=1.8.3
LIVEKIT_BIN_PATH=/usr/local/bin/livekit-server
LIVEKIT_CONFIG_FILE=/etc/livekit/livekit.yaml
LIVEKIT_PORT=7880
LIVEKIT_NODE_IP=127.0.0.1
# Comma-separated key:secret pairs, example: key1:secret1,key2:secret2
LIVEKIT_KEYS=coziyoo_key:coziyoo_super_secret_very_long
FORCE_LIVEKIT_INSTALL=false

# -----------------------------
# Nginx
# -----------------------------
ADMIN_DOMAIN=admin.coziyoo.com
API_DOMAIN=api.coziyoo.com
API_PROXY_PORT=3000
LIVEKIT_DOMAIN=livekit.coziyoo.com
AGENT_DOMAIN=agent.coziyoo.com

# -----------------------------
# Optional PostgreSQL bootstrap
# -----------------------------
PG_DB=
PG_USER=
PG_PASSWORD=
