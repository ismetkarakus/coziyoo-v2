# Copy this file to installation/config.env and adjust values.

# -----------------------------
# Global
# -----------------------------
INSTALL_PREREQS=true
INSTALL_POSTGRES=true
INSTALL_API=true
INSTALL_AGENT=true
INSTALL_ADMIN=true
INSTALL_NGINX=false

# Pull latest code during install/update steps when repo has .git
GIT_UPDATE=true
DEPLOY_BRANCH=main

# Repo path (relative to installation/ or absolute)
REPO_ROOT=/opt/coziyoo
INGRESS_MODE=npm
NPM_INSTALL_DIR=/root/nginx-proxy-manager
NPM_HTTP_PORT=80
NPM_HTTPS_PORT=443
NPM_UI_PORT=81

# -----------------------------
# Paths (relative to REPO_ROOT unless absolute)
# -----------------------------
API_DIR=.
AGENT_DIR=agent-python
ADMIN_DIR=admin-panel
ADMIN_PUBLISH_DIR=/var/www/coziyoo-admin
ADMIN_SERVICE_NAME=coziyoo-admin
ADMIN_PORT=8000
ADMIN_API_BASE_URL=https://api.coziyoo.com

# -----------------------------
# API (Node.js + Express)
# -----------------------------
API_SERVICE_NAME=coziyoo-api
API_RUN_USER=root
API_RUN_GROUP=root
API_ENV_FILE=/opt/coziyoo/.env
API_PORT=3000
API_START_CMD="node dist/src/server.js"
SEED_ADMIN_EMAIL=admin@coziyoo.com
SEED_ADMIN_PASSWORD=12345
# Optional override for API CORS allowlist (comma-separated origins)
# API_CORS_ALLOWED_ORIGINS=https://admin.coziyoo.com,http://admin.coziyoo.com,https://agent.coziyoo.com,http://agent.coziyoo.com

# -----------------------------
# Agent (Python)
# -----------------------------
AGENT_SERVICE_NAME=coziyoo-agent
AGENT_RUN_USER=root
AGENT_RUN_GROUP=root
AGENT_ENV_FILE=/opt/coziyoo/agent-python/.env.local
AGENT_START_CMD="python src/agent_http_runner.py"
AGENT_HTTP_HOST=127.0.0.1
AGENT_HTTP_PORT=8787
AGENT_HEALTH_PATH=/health

# -----------------------------
# LiveKit (first-install only)
# -----------------------------
LIVEKIT_VERSION=1.8.3
LIVEKIT_BIN_PATH=/usr/local/bin/livekit-server
LIVEKIT_CONFIG_FILE=/opt/livekit/livekit.yaml
LIVEKIT_PORT=7880
LIVEKIT_NODE_IP=127.0.0.1
LIVEKIT_RTC_PORT_START=50000
LIVEKIT_RTC_PORT_END=50200
# Comma-separated key:secret pairs, example: key1:secret1,key2:secret2
LIVEKIT_KEYS=coziyoo_key:replace_with_at_least_32_characters_secret_value
FORCE_LIVEKIT_INSTALL=false

# -----------------------------
# Nginx
# -----------------------------
ADMIN_DOMAIN=admin.coziyoo.com
API_DOMAIN=api.coziyoo.com
API_PROXY_PORT=3000
LIVEKIT_DOMAIN=livekit.coziyoo.com
AGENT_DOMAIN=agent.coziyoo.com

# -----------------------------
# Optional PostgreSQL bootstrap
# -----------------------------
PG_DB=coziyoo
PG_USER=coziyoo
PG_PASSWORD=coziyoo
